=== LOGIN ===
Status: 200

=== GET /users/me ===
{
  "detail": "'Role' object has no attribute 'icon_url'",
  "type": "AttributeError",
  "traceback": "  + Exception Group Traceback (most recent call last):\n  |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/_utils.py\", line 77, in collapse_excgroups\n  |     yield\n  |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/base.py\", line 186, in __call__\n  |     async with anyio.create_task_group() as task_group:\n  |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/anyio/_backends/_asyncio.py\", line 781, in __aexit__\n  |     raise BaseExceptionGroup(\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 165, in __call__\n    |     await self.app(scope, receive, _send)\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/base.py\", line 185, in __call__\n    |     with collapse_excgroups():\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/contextlib.py\", line 158, in __exit__\n    |     self.gen.throw(typ, value, traceback)\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/_utils.py\", line 83, in collapse_excgroups\n    |     raise exc\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/base.py\", line 187, in __call__\n    |     response = await self.dispatch_func(request, call_next)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/home/roddy/GW2_WvWbuilder/backend/app/main.py\", line 140, in add_security_headers\n    |     response = await call_next(request)\n    |                ^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/base.py\", line 163, in call_next\n    |     raise app_exc\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/base.py\", line 149, in coro\n    |     await self.app(scope, receive_or_disconnect, send_no_error)\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/sessions.py\", line 85, in __call__\n    |     await self.app(scope, receive, send_wrapper)\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/gzip.py\", line 20, in __call__\n    |     await responder(scope, receive, send)\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/gzip.py\", line 39, in __call__\n    |     await self.app(scope, receive, self.send_with_gzip)\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 85, in __call__\n    |     await self.app(scope, receive, send)\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 62, in __call__\n    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 62, in wrapped_app\n    |     raise exc\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 51, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/routing.py\", line 715, in __call__\n    |     await self.middleware_stack(scope, receive, send)\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/routing.py\", line 735, in app\n    |     await route.handle(scope, receive, send)\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/routing.py\", line 288, in handle\n    |     await self.app(scope, receive, send)\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/routing.py\", line 76, in app\n    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 62, in wrapped_app\n    |     raise exc\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 51, in wrapped_app\n    |     await app(scope, receive, sender)\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/routing.py\", line 73, in app\n    |     response = await f(request)\n    |                ^^^^^^^^^^^^^^^^\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/fastapi/routing.py\", line 291, in app\n    |     solved_result = await solve_dependencies(\n    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 605, in solve_dependencies\n    |     solved_result = await solve_dependencies(\n    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 628, in solve_dependencies\n    |     solved = await call(**solved_result.values)\n    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/home/roddy/GW2_WvWbuilder/backend/app/api/deps.py\", line 121, in get_current_user\n    |     _ = [\n    |         ^\n    |   File \"/home/roddy/GW2_WvWbuilder/backend/app/api/deps.py\", line 122, in <listcomp>\n    |     (role.id, role.name, role.description, role.permission_level, role.is_default, role.icon_url)\n    |                                                                                    ^^^^^^^^^^^^^\n    | AttributeError: 'Role' object has no attribute 'icon_url'\n    +------------------------------------\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/errors.py\", line 165, in __call__\n    await self.app(scope, receive, _send)\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/base.py\", line 185, in __call__\n    with collapse_excgroups():\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/contextlib.py\", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/_utils.py\", line 83, in collapse_excgroups\n    raise exc\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/base.py\", line 187, in __call__\n    response = await self.dispatch_func(request, call_next)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/roddy/GW2_WvWbuilder/backend/app/main.py\", line 140, in add_security_headers\n    response = await call_next(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/base.py\", line 163, in call_next\n    raise app_exc\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/base.py\", line 149, in coro\n    await self.app(scope, receive_or_disconnect, send_no_error)\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/sessions.py\", line 85, in __call__\n    await self.app(scope, receive, send_wrapper)\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/gzip.py\", line 20, in __call__\n    await responder(scope, receive, send)\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/gzip.py\", line 39, in __call__\n    await self.app(scope, receive, self.send_with_gzip)\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/cors.py\", line 85, in __call__\n    await self.app(scope, receive, send)\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/middleware/exceptions.py\", line 62, in __call__\n    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 62, in wrapped_app\n    raise exc\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 51, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/routing.py\", line 715, in __call__\n    await self.middleware_stack(scope, receive, send)\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/routing.py\", line 735, in app\n    await route.handle(scope, receive, send)\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/routing.py\", line 288, in handle\n    await self.app(scope, receive, send)\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/routing.py\", line 76, in app\n    await wrap_app_handling_exceptions(app, request)(scope, receive, send)\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 62, in wrapped_app\n    raise exc\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/_exception_handler.py\", line 51, in wrapped_app\n    await app(scope, receive, sender)\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/starlette/routing.py\", line 73, in app\n    response = await f(request)\n               ^^^^^^^^^^^^^^^^\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/fastapi/routing.py\", line 291, in app\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 605, in solve_dependencies\n    solved_result = await solve_dependencies(\n                    ^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/roddy/.pyenv/versions/3.11.8/lib/python3.11/site-packages/fastapi/dependencies/utils.py\", line 628, in solve_dependencies\n    solved = await call(**solved_result.values)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/roddy/GW2_WvWbuilder/backend/app/api/deps.py\", line 121, in get_current_user\n    _ = [\n        ^\n  File \"/home/roddy/GW2_WvWbuilder/backend/app/api/deps.py\", line 122, in <listcomp>\n    (role.id, role.name, role.description, role.permission_level, role.is_default, role.icon_url)\n                                                                                   ^^^^^^^^^^^^^\nAttributeError: 'Role' object has no attribute 'icon_url'\n"
}

=== ROLES CHECK ===
❌ FAILED: No roles loaded
