[pytest]
testpaths = tests
python_files = test_*.py
python_functions = test_*
python_classes = Test*

# Configuration pour les tests
addopts = -v --cov=app --cov-report=term-missing --cov-report=xml:coverage.xml -W ignore::pytest.PytestUnraisableExceptionWarning

# Ignorer les r√©pertoires de l'environnement virtuel et de cache
norecursedirs = .git .tox .pytest_cache __pycache__ venv env .venv .mypy_cache .vscode

# Configuration de la couverture de code
[pytest-cov]
source = app
omit = 
    app/tests/**
    **/__pycache__/**
    **/migrations/**
    **/venv/**
    **/.venv/**
    **/env/**
    **/.env/**
    app/config.py
    app/database/*
    app/db/*

# Configuration pour asyncio
asyncio_mode = auto

# Configuration pour les logs
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s)
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Configuration pour les avertissements
filterwarnings =
    ignore::DeprecationWarning
    ignore::UserWarning
    ignore::RuntimeWarning
    ignore::FutureWarning
    ignore::_pytest.unraisableexception.PytestUnraisableExceptionWarning
    ignore:Exception ignored in:pytest.PytestUnraisableExceptionWarning
    ignore:Exception ignored in:.*gzip.*:pytest.PytestUnraisableExceptionWarning

# Configuration pour les tests asynchrones
testpaths = tests
python_files = test_*.py test_*.pyx test_*.so test_*.pyd test_*.pyc test_*.pyo
python_classes = Test* *Test *Test* *Tests *Tests*
python_functions = test_* *test *test_* *test*
